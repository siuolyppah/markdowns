# 建堆

```cpp
template<typename T>
inline void binary_heap<T>::build_tree()
{
	for (size_type i = current_size / 2; i >= 1; --i) {
		down(i);
	}
}
```



# 插入

1. 先放到最后；
2. 再向上调整；



```cpp
template<typename T>
inline void binary_heap<T>::insert(T data)
{
	arr[++current_size] = data;

	up(current_size);
}
```



# 删除最小元素

1. 返回下标为1的元素；
2. 将最后一个元素，放到下标为1的位置，并进行向下调整。



```cpp
template<typename T>
inline T binary_heap<T>::remove_min()
{
	T tmp = std::move(arr[1]);

	arr[1] = arr[current_size--];
	down(1);

	return std::move(tmp);
}
```



# 向上调整

```cpp
template<typename T>
inline void binary_heap<T>::up(size_type hole)
{
	T tmp = std::move(arr[hole]);

	while (hole > 1 && arr[hole / 2] < arr[hole]) {
		arr[hole] = arr[hole / 2];
		hole /= 2;
	}

	arr[hole] = std::move(tmp);
}
```





# 向下调整

```cpp
template<typename T>
inline void binary_heap<T>::down(size_type hole)
{
	T tmp = std::move(arr[hole]);

	while (2 * hole <= current_size) {
		size_type x = 2 * hole;
		if (x + 1 <= current_size && arr[x + 1] < arr[x])
			++x;

		if (arr[hole] < arr[x])
			break;

		arr[hole] = arr[x];
		hole = x;
	}

	arr[hole] = std::move(tmp);
}
```

