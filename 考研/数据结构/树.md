# 术语

## 路径、深度、高

### 路径

- 路径($n_1 \sim n_k$)的长，为边的个数，即$k-1$.

- 任意节点，到它本身的路径长度为0.



### 深度

- 任一节点$n_i$的深度，为根节点到$n_i$的路径长度。
- 根的深度为0.



### 高

- 任一节点$n_i$的高，为$n_i$到某片树叶的最长路径的长度。
- 叶子节点的高为0.
- 树的高度，就是根节点的高度。



### 例如

![image-20221005134838119](%E6%A0%91.assets/image-20221005134838119.png)

- E的深度1，高度为2.
- F的深度1，高度为1.
- 树的高度为3.





## 祖先与后裔

- 若存在$n_1$到$n_2$的路径，那么$n_1$是$n_2$的祖先，$n_2$是$n_1$的后裔。
- 当$n_1\neq n_2$，$n_1$是$n_2$的真祖先，$n_2$是$n_1$的真后裔。



## 节点的度、树的度

- 节点的度：该节点的子树的个数。
- 树的度：树中所有节点的度数的最大值。



# 树的存储结构

## 双亲表示（向上指）

```cpp
template <typename T>
struct tree_node
{
    T data;
    tree_node *parent;
};
```



## 孩子链表示（向下指）

```cpp
template <typename T>
struct tree_node
{
    T data;
    tree_node *sons[MaxSons];
};
```



## 左孩子右兄弟表示（向下向右指）

```cpp
template <typename T>
struct tree_node
{
    T data;
    tree_node *first_child;
    tree_node *next_sibling;
};
```

![image-20221005135506079](%E6%A0%91.assets/image-20221005135506079.png)

> 注意，是由该节点出发，链接指向它的孩子和兄弟节点。





# 一般树的遍历

- 先序：
  - 先序遍历中，对节点本身的处理工作，先于对子节点的遍历。
  - 对于二叉树，即本身、左孩子、右孩子。
- 中序：
  - 对于二叉树，即左、本、右。
- 后序：
  - 先对子节点进行遍历，再处理节点本身。
  - 对于二叉树，即左、右、本。



# 二叉树

## 二叉树的表示(向下指)

```cpp
template <typename T>
struct binary_node
{
    T data;
    binary_node *left;
    binary_node *right;
};
```



## 表达式树

![image-20221005142249881](%E6%A0%91.assets/image-20221005142249881.png)

> 表达式树的后序遍历，即==后缀表达式==。



### 后缀表达式，建立二叉树

P77



## 二叉查找树BST

- 左节点均比本节点小，右节点均比本节点大。

- 时间复杂度：
  1. 增删查，$O(log_2N)$
  2. 遍历，$O(N)$



### 二叉查找树的删除

- 被删除目标节点，只有一个儿子节点：

  调整目标节点的父节点的链，令其直接指向儿子节点。

  > 或者说，得到目标节点的引用t，修改t的链接指向到t的儿子节点。

- 被删除目标节点，具有两个儿子节点：

  用右子树最小的数据，代替该节点的数据，并递归地删除那个节点。

  > 举例来说：
  >
  > ![image-20221005171114677](%E6%A0%91.assets/image-20221005171114677.png)
  >
  > 1. 要删除节点2，则先将节点2的数值，修改为右子树的最小值x
  > 2. 对右子树，进行删除x的操作。



## 平衡树AVL

一颗AVL树，是每个节点的左子树，与右子树高度最多差1的BST。

> 空树的高度定义为-1.



- 每个节点，再其内部还要==额外保存高度信息==。



对AVL树的探讨，都是对最小不平衡子树的讨论。

一共分为四种导致失衡的情况：

- LL

  ![image-20221007145729029](%E6%A0%91.assets/image-20221007145729029.png)

  > 只有在这三棵子树，高度全为H的情况下，才会导致在平衡子树的基础上，插入了一个节点后失衡，且失衡节点为A。

- RR

  ![image-20221007145707325](%E6%A0%91.assets/image-20221007145707325-1665125828132-1.png)

- LR

  ![image-20221007150142656](%E6%A0%91.assets/image-20221007150142656.png)

  ![image-20221007150333201](%E6%A0%91.assets/image-20221007150333201.png)

- RL

  同理。



