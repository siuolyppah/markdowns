# 用户和用户组

- `/etc/passwd`：用户相关信息
- `/etc/shadow`：个人密码
- `/etc/group`：所有的组名



# Linux文件属性

以`ls -la`命令查看当前目录：

![image-20220912080738593](%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90%E4%B8%8E%E7%9B%AE%E5%BD%95%E9%85%8D%E7%BD%AE.assets/image-20220912080738593.png)

![image-20220912080935177](%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90%E4%B8%8E%E7%9B%AE%E5%BD%95%E9%85%8D%E7%BD%AE.assets/image-20220912080935177.png)

![image-20220912080953985](%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90%E4%B8%8E%E7%9B%AE%E5%BD%95%E9%85%8D%E7%BD%AE.assets/image-20220912080953985.png)



关于文件类型与权限（即共10个字符）：

- 第一个字符：

  - `d`：目录
  - `-`：文件
  - `l`：链接文件
  - `b`：为设备文件里面的可供存储的周边设备（可按块读写的设备）
  - `c`：设备文件里面的串行端口设备（鼠标、键盘等）

- ==接下来每三个一组，分别是rwx（可读、可写、可执行）==。

  >- 文件创建的时候，owner 所属的主组会成为该文件的 owner group。
  >- 一个用户，可以同时属于多个用户组。



关于链接（inode）：

每个文件都会将它的权限和属性记录到文件系统的inode中，每个文件名都会链接一个inode，该属性记录的是有多少个不同的文件名链接到同一个inode号码。



# 修改文件属性与权限

- `chgrp`：修改用户所属用户组

  > 待修改的组名，必须存在于/etc/group文件中。

- `chown`：修改文件拥有者

  > - 待修改的用户，必须存在于/etc/passwd文件中。
  > - 也可以顺便直接修改用户组。

- `chmod`：修改文件权限

  ```sh
  chmod 777 test.txt
  chmod u=rwx,go=rx test.txt
  ```

  | chmod | u(user)<br />g(group)<br />o(other)<br />a(all) | +（加入）<br />-（移除）<br />=（设置） | r<br />w<br />x | 文件或目录 |
  | ----- | ----------------------------------------------- | --------------------------------------- | --------------- | ---------- |



# 文件与目录的权限意义

- 文件：
  - r：读取
  - ==w：编辑内容（但不能删除该文件）==
  - x：执行
- 目录：
  - ==r：仅读取目录结构==
  - w：修改该目录的结构，即：
    - 建立新文件与目录
    - ==删除已经存在的文件或目录（而不管文件的权限是什么）==
    - 将已存在的文件或目录重命名
    - 移动该目录内的文件、目录位置
  - ==x：是否能够进入该目录成为工作目录==



# Linux目录配置

## FHS

> 即Filesystem Hierarchy Standard

>[Linux 系统目录结构 | 菜鸟教程 (runoob.com)](https://www.runoob.com/linux/linux-system-contents.html)
>
>5.3.1节



FHS依据文件系统使用的频繁与否、是否允许用户随意修改，分为：

|                  | 可分享(shareable)      | 不可分享                |
| ---------------- | ---------------------- | ----------------------- |
| 不可变(static)   | /usr（软件存放处）     | /etc（配置文件）        |
|                  | /opt（第三方辅助软件） | /boot（启动与内核文件） |
| 可变动(variable) | /var/mail（用户邮箱）  | /var/run（程序相关）    |
|                  | /var/spool/news        | /var/lock（程序相关）   |

- 可分享：可以分析给其他系统挂载使用的目录。
- 不可分享：自己机器上允许的设备文件或程序相关的socket文件等。
- 不变：不随发行版而变动。如函数库、文件说明、系统管理员所管理的主机服务配置文件等。
- 可变动：经常修改的数据，如日志文件。



FHS定义的三个主目录：

- `/`

- `/var`：

  var 是 variable(变量) 的缩写，这个目录中<u>存放着在不断扩充着的东西</u>，我们习惯将那些经常被修改的目录放在这个目录下。包括各种日志文件。

- `/usr`：

   usr 是 unix shared resources(共享资源) 的缩写，这是一个非常重要的目录，用户的很多应用程序和文件都放在这个目录下，类似于 windows 下的 program files 目录。
