# 安装Rust

[安装 - Rust 程序设计语言 简体中文版 (kaisery.github.io)](https://kaisery.github.io/trpl-zh-cn/ch01-01-installation.html)



```sh
rustc --version
```



# Hello,World

```rust
fn main() {
    println!("hello,world");
}
```

>`println!` 调用了一个 ==Rust 宏（macro）==。如果是调用函数，则应输入 `println`（没有`!`）。我们将在第十九章详细讨论宏。现在你只需记住，当看到符号 `!` 的时候，就意味着调用的是宏而不是普通函数，==并且宏并不总是遵循与函数相同的规则==。





编译并运行：

```sh
$ rustc main.rs
$ ./main
Hello, world!
```



# Hello,Cargo

==Cargo 是 Rust 的构建系统和包管理器==。大多数 Rustacean 们使用 Cargo 来管理他们的 Rust 项目，因为它可以为你处理很多任务，比如构建代码、下载依赖库并编译这些库。（我们把代码所需要的库叫做 **依赖**（*dependencies*））。

```sh
cargo --version
```



## 使用Cargo创建项目

```sh
cargo new hello_cargo
cd hello_cargo
```

第一行命令新建了名为 *hello_cargo* 的目录和项目。



将会看到 Cargo 生成了两个文件和一个目录：

- 一个 *Cargo.toml* 文件，
- 一个 *src* 目录，
  - 以及位于 *src* 目录中的 *main.rs* 文件。



Cargo 期望源文件存放在 *src* 目录中。项目根目录只存放 README、license 信息、配置文件和其他跟代码无关的文件。使用 Cargo 帮助你保持项目干净整洁，一切井井有条。



## Cargo.toml

```toml
[package]
name = "hello_cargo"
version = "0.1.0"
edition = "2021"

# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html

[dependencies]
```

- 第一行，`[package]`，是一个==片段（section）标题==，表明下面的语句用来配置一个包。随着我们在这个文件增加更多的信息，还将增加其他片段（section）。
- 接下来的三行设置了 Cargo 编译程序所需的配置：项目的名称、项目的版本以及要使用的 Rust 版本。
- 最后一行，`[dependencies]`，是罗列项目依赖的片段的开始。在 Rust 中，代码包被称为 *crates*。这个项目并不需要其他的 crate，不过在第二章的第一个项目会用到依赖，那时会用得上这个片段。





## 构建并运行Cargo项目

在 *hello_cargo* 目录下，输入下面的命令来构建项目：

```SH
$ cargo build
```



运行：

- 直接运行`.\target\debug\hello_cargo.exe`

- 或：`cargo run`

  >如果修改了源文件的话，Cargo 会在运行之前重新构建项目



> Cargo 还提供了一个叫 `cargo check` 的命令。该命令快速检查代码确保其可以编译，但并不产生可执行文件。



## 发布(release)构建

当项目最终准备好发布时，可以使用 `cargo build --release` 来优化编译项目。这会在 *target/release* 而不是 *target/debug* 下生成可执行文件。这些优化可以让 Rust 代码运行的更快，不过启用这些优化也需要消耗更长的编译时间。



## 总结

我们回顾下已学习的 Cargo 内容：

- 可以使用 `cargo new` 创建项目。
- 可以使用 `cargo build` 构建项目。
  - `cargo build --release`进行发布构建。
- 可以使用 `cargo run` 一步构建并运行项目。
- 可以使用 `cargo check` 在不生成二进制文件的情况下构建项目来检查错误。
- 有别于将构建结果放在与源码相同的目录，Cargo 会将其放到 *target/debug* 目录。

