# When is Move Semantics Automatically Enabled in Classes:star:

the automatic generation of move operations is disabled when at least one of the following special member functions is <u>user-declared</u>(包括设置为=default):

- Copy constructor

- Copy assignment operator

- Another move operation

- <u>Destructor</u>

  >Even the following declaration is enough to disable move semantics:
  >
  >```cpp
  >class Customer {
  >    ~Customer() = default; // automatic move semantics is disabled
  >};
  >```



# Special Member Functions:star:

The C++ standard defines the following six operations as special member functions:

- Default constructor
- Copy constructor
- Copy assignment operator
- Move constructor (since C++11)
- Move assignment operator (since C++11)
- Destructor



The figure  gives an overview of ==when special member functions are automatically generated== depending on which (other) constructors and special member functions are declared:

![image-20221031163555663](3.Move%20Semantics%20in%20Classes.assets/image-20221031163555663.png)

There are a few basic rules you can see in this table:

- A default constructor is only declared automatically if no other constructor is user-declared.

- The special copy member functions and the destructor disable move support.

  >still a request to move an object usually works because the copy member functions are used as a fallback.

- The special move member functions disable the normal copying and assignment.

> :star:==declare means:(implemented, generated with =default, or <u>disabled with =delete</u>)==

> 关于详细的每个特殊成员函数自动生成的条件，参见3.3.8节。



# The Rule of Five or Three:star:

The guideline is to either declare all five (copy constructor, move constructor, copy assignment operator, move assignment operator, and destructor) or none of them.



Here, declaring means:

- Either to implement ({...})
- Or to declare as defaulted (=default)
- Or to declare as deleted (=delete)



