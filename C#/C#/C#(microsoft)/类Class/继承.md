# 引用转换

- 向上转换：隐式进行
- 向下转换：显式说明



# AS操作符

可用于执行向下转换：

- 若转换失败，则值为null。而非抛出异常。



```cs
class Father { }

class Son : Father { }

class Program
{
    static void Main(string[] args)
    {
        Father father = new Father();

        Son son = father as Son;
        Console.WriteLine(son is null); // true
    }
}
```



# IS操作符与模式变量

```cs
class Program
{
    static void Main(string[] args)
    {
        Father father = new Son();

        if (father is Son s)	// 同时引入一个变量
        {
            Console.WriteLine(s);
        }
    }
}
```



# Virtual函数成员 与 Override重写

- 标记为virtual的函数，可以被子类重写。

  > 包括：方法、属性、索引器、事件

- 使用override修饰符，重写父类函数。





```cs
class Father
{
    public virtual int Age => 40;   // virtual属性
}

class Son : Father
{
    public override int Age => base.Age - 20;
}

class Program
{
    static void Main(string[] args)
    {
        Father father = new Son();
        Console.WriteLine(father.Age);  // 20
    }
}
```



# 抽象类和抽象成员

- 声明为abstract的类是抽象类
- 抽象成员类似于virtual成员，但是不提供具体实现。



```cs
abstract class Asset
{
    public abstract decimal NetValue { get; }
}

class Stock : Asset
{
    public decimal CurrentPrice;
    //  getter
    public override decimal NetValue => 2 * CurrentPrice;
}
```



# sealed关键字

- 用于防止已重写过的成员，再被子类重写：

  ```cs
  public sealed override int Age { get {return 20;}}
  ```

- 也可以写在类上，相当于 sealed所有的virtual函数。



# 子父构造函数与字段初始化顺序

![image-20220802150727685](%E7%BB%A7%E6%89%BF.assets/image-20220802150727685.png)